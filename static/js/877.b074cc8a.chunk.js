"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[877],{6877:function(e,t,s){s.r(t),s.d(t,{default:function(){return he}});var n=s(1413),r=s(5671),i=s(3144),o=s(136),a=s(5716),l=s(2791),u=s(885),c="ProfileInfo_button__E5T-5",d="ProfileInfo_userInfoSection__3Z9OI",f="ProfileInfo_editModeContainer__s+QLK",h="ProfileInfo_editFormContainer__6eS5d",p="ProfileInfo_editModeContacts__rU7ld",m="ProfileInfo_editModeInput__bpTLu",v="ProfileInfo_userDescription__9Y4-J",_="ProfileInfo_userName__D6-rQ",x="ProfileInfo_userInfoText__dMC92",j="ProfileInfo_flexContainer__Sqzbl",P="ProfileInfo_contactsSection__XR-tN",N="ProfileInfo_contactText__jQCk4",g="ProfileInfo_userAvatarSection__GV+rs",y="ProfileInfo_userAvatar__s15xl",S="ProfileInfo_inputFileButtonContainer__aayJz",b="ProfileInfo_inputFile__4g0YU",I="ProfileInfo_statusContainer__cGy3u",Z=s(8297),k=s(4353),C="ProfileStatus_status__eG8tH",w="ProfileStatus_editStatus__jlLeK",M=s(184),A=function(e){(0,o.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={editMode:!1,status:e.props.status,isOwner:e.props.isOwner},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return(0,i.Z)(s,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,M.jsx)("div",{children:this.state.editMode?(0,M.jsx)("div",{children:(0,M.jsx)("input",{autoFocus:!0,onChange:this.onStatusChange,onBlur:this.deactivateEditMode,value:this.state.status,className:w})}):(0,M.jsx)("div",{children:(0,M.jsx)("span",{className:C,onClick:this.activateEditMode,children:this.props.status||"Status is not set"})})})}}]),s}(l.Component),F=s(1117),E=s(704),O=s(9234),T=s(8094),D=(0,E.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.profile,n=e.error;return(0,M.jsxs)("form",{onSubmit:t,className:h,children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{children:(0,M.jsx)(T.Z,{type:"submit",className:c,children:"Save info"})}),n&&(0,M.jsx)("div",{className:O.Z.formSummaryError,children:n}),(0,M.jsxs)("div",{className:x,children:[(0,M.jsx)("span",{className:x,children:"Full name: "}),(0,F.Gr)("Full name","fullName",[],F.II,{},"","",m)]}),(0,M.jsxs)("div",{className:j,children:[(0,M.jsx)("span",{className:x,children:"Looking for a job: "}),(0,M.jsx)("div",{className:m,children:(0,F.Gr)("","lookingForAJob",[],F.II,{type:"checkbox"},"","","")})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:x,children:"Skills: "}),(0,F.Gr)("Skills","lookingForAJobDescription",[],F.gx,{},"","",m)]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:x,children:"About me: "}),(0,F.Gr)("About me","aboutMe",[],F.gx,{},"","",m)]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:p,children:"Contacts"}),Object.keys(s.contacts).map((function(e){return(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:x,children:e}),": ",(0,F.Gr)(e,"contacts.".concat(e),[],F.II,{},"","",m)]},e)}))]})]})})),G=function(e){var t=e.contactTitle,s=e.contactValue;return(0,M.jsxs)("div",{className:N,children:[t,": ",s]})},U=function(e){var t=e.profile,s=e.isOwner,n=e.enableEditMode;return(0,M.jsxs)("div",{className:v,children:[s&&(0,M.jsx)("div",{children:(0,M.jsx)(T.Z,{onClick:n,className:c,children:"Edit info"})}),(0,M.jsx)("div",{className:_,children:t.fullName?t.fullName:"information is absent"}),(0,M.jsxs)("div",{className:x,children:["Looking for a job: ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJobDescription&&(0,M.jsxs)("div",{className:x,children:["Skills: ",t.lookingForAJobDescription]}),t.aboutMe&&(0,M.jsxs)("div",{className:x,children:["About me: ",t.aboutMe]}),!Object.keys(t.contacts).map((function(e){return t.contacts[e]})).every((function(e){return null===e}))&&(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:P,children:"Contacts: "}),Object.keys(t.contacts).map((function(e){return t.contacts[e]?(0,M.jsx)(G,{contactTitle:e,contactValue:t.contacts[e]},e):null}))]})]})},J=function(e){var t=e.profile,s=e.isOwner,n=e.status,r=e.updateStatus,i=e.savePhoto,o=e.saveProfile,a=(0,l.useState)(!1),c=(0,u.Z)(a,2),h=c[0],p=c[1];if(!t)return(0,M.jsx)(Z.p,{});return(0,M.jsx)("div",{children:(0,M.jsxs)("div",{className:d,children:[(0,M.jsxs)("div",{className:g,children:[(0,M.jsx)("img",{className:y,src:t.photos.large||k,alt:t.fullName+" user avatar"}),s&&(0,M.jsxs)("div",{className:S,children:[(0,M.jsx)("input",{type:"file",name:"file",id:"file",className:b,onChange:function(e){var t;1===(null===(t=e.target.files)||void 0===t?void 0:t.length)&&i(e.target.files[0])}}),(0,M.jsx)("label",{htmlFor:"file",children:"Change avatar"})]})]}),(0,M.jsxs)("div",{className:f,children:[(0,M.jsx)("div",{className:I,children:(0,M.jsx)(A,{status:n,updateStatus:r,isOwner:s})}),h?(0,M.jsx)(D,{onSubmit:function(e){o(e).then((function(){p(!1)}))},profile:t,initialValues:t}):(0,M.jsx)(U,{profile:t,isOwner:s,enableEditMode:function(){return p(!0)}})]})]})})},Q=s(81),q=s(2982),z="MyPosts_myPostsSection__lI5dB",B="MyPosts_myPostsTitle__+s3ZS",L="MyPosts_newPostSection__KXIeJ",V="MyPosts_newPostCreateField__HTbSy",H="MyPosts_sendPostBtn__A609R",K="Post_post__jQ6al",R="Post_avatar__x-pWM",W="Post_textBlock__quwNQ",X="Post_userMessage__V10ie",Y="Post_likesWrapper__ZW420",$="Post_likesCount__IQzHH",ee=function(e){return(0,M.jsxs)("div",{className:K,children:[(0,M.jsx)("div",{className:R,children:(0,M.jsx)("img",{src:k,alt:"user avatar"})}),(0,M.jsxs)("div",{className:W,children:[(0,M.jsx)("p",{className:X,children:e.message}),(0,M.jsx)("div",{className:Y,children:(0,M.jsxs)("span",{children:["likes: ",(0,M.jsx)("span",{className:$,children:e.likesCount})]})})]})]})},te=s(6139),se=s(3079),ne=l.memo((function(e){var t=(0,q.Z)(e.posts).reverse().map((function(e){return(0,M.jsx)(ee,{message:e.message,likesCount:e.likesCount})}));return(0,M.jsxs)("div",{className:z,children:[(0,M.jsx)("h3",{className:B,children:"My posts"}),(0,M.jsx)("div",{className:L,children:(0,M.jsx)(ie,{onSubmit:function(t){e.addPost(t.newPostText)}})}),(0,M.jsx)("div",{children:t})]})})),re=(0,se.D)(10),ie=(0,E.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,M.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,M.jsx)("div",{children:(0,M.jsx)(te.Z,{className:V,component:F.gx,name:"newPostText",placeholder:"Post message",validate:[se.C,re]})}),(0,M.jsx)("div",{children:(0,M.jsx)(T.Z,{type:"submit",className:H,children:"Send"})})]})})),oe=ne,ae=s(364),le=(0,ae.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e((0,Q.Pi)(t))}}}))(oe),ue=function(e){var t=e.profile,s=e.isOwner,n=e.status,r=e.updateStatus,i=e.savePhoto,o=e.saveProfile;return(0,M.jsxs)("div",{children:[(0,M.jsx)(J,{profile:t,isOwner:s,status:n,updateStatus:r,savePhoto:i,saveProfile:o}),(0,M.jsx)(le,{isOwner:s,userAvatar:null===t||void 0===t?void 0:t.photos.small})]})},ce=s(9271),de=s(7781),fe=function(e){(0,o.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var e=Number(this.props.match.params.userId);e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),"number"===typeof e&&(this.props.getUserProfile(e),this.props.getStatus(e))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,M.jsx)(ue,(0,n.Z)((0,n.Z)({},this.props),{},{profile:this.props.profile,isOwner:void 0===this.props.match.params.userId||+this.props.match.params.userId===this.props.currentUser,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),s}(l.Component),he=(0,de.qC)((0,ae.$j)((function(e){return{profile:e.profilePage.profile,isOwner:e.profilePage.isOwner,currentUser:e.auth.userId,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:Q.et,getStatus:Q.lR,updateStatus:Q.Nf,savePhoto:Q.Ju,saveProfile:Q.Ii}),ce.EN)(fe)},1117:function(e,t,s){s.d(t,{gx:function(){return d},II:function(){return f},Gr:function(){return h}});var n=s(1413),r=s(5987),i=(s(2791),s(9234)),o=s(6139),a=s(184),l=["input","meta"],u=["input","meta"],c=function(e){var t=e.meta,s=t.touched,n=t.error,r=e.children,o=s&&n;return(0,a.jsxs)("div",{className:o?i.Z.formControlError:"",children:[(0,a.jsx)("div",{children:r}),(0,a.jsx)("div",{children:o&&(0,a.jsx)("span",{children:n})})]})},d=function(e){var t=e.input,s=(e.meta,(0,r.Z)(e,l));return(0,a.jsx)(c,(0,n.Z)((0,n.Z)({},e),{},{children:(0,a.jsx)("textarea",(0,n.Z)((0,n.Z)({},t),s))}))},f=function(e){var t=e.input,s=(e.meta,(0,r.Z)(e,u));return(0,a.jsx)(c,(0,n.Z)((0,n.Z)({},e),{},{children:(0,a.jsx)("input",(0,n.Z)((0,n.Z)({},t),s))}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0;return(0,a.jsxs)("div",{className:u,children:[(0,a.jsx)(o.Z,(0,n.Z)((0,n.Z)({placeholder:e,name:t,validate:s,component:r},i),{},{className:c})),l]})}},3079:function(e,t,s){s.d(t,{C:function(){return n},D:function(){return r}});var n=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},9234:function(e,t){t.Z={formControlError:"FormsControls_formControlError__qwwm7",formSummaryError:"FormsControls_formSummaryError__vFhQG"}},885:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(181);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i=[],o=!0,a=!1;try{for(s=s.call(e);!(o=(n=s.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){a=!0,r=l}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return i}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=877.b074cc8a.chunk.js.map